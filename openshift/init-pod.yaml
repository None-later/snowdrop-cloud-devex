piVersion: v1
kind: Pod
metadata:
  name: init-pod
  labels:
    app: myapp
spec:
  volumes:
  - name: shared-data
    emptyDir: {}
  initContainers:
  - image: 172.30.1.1:5000/k8s-supervisor/copy-supervisord:1.0
    name: copy-supervisord
    command:
      - "/usr/bin/cp"
    args:
      - "-r"
      - "/opt/supervisord"
      - /var/lib/
    volumeMounts:
    - name: shared-data
      mountPath: /var/lib/supervisord
  containers:
  - image: centos
    name: run-supervisord
    volumeMounts:
    - name: shared-data
      mountPath: /var/lib/supervisord
    command:
      - "/var/lib/supervisord/bin/supervisord"
    args:
      - "-c"
      - "/var/lib/supervisord/conf/supervisor.conf"